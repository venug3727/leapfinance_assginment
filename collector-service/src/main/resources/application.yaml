server:
  port: 8080

spring:
  application:
    name: infopulse-collector
  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false

# MongoDB Configuration (single Atlas cluster, dual logical databases)
mongodb:
  # For MongoDB Atlas, use format: mongodb+srv://username:password@cluster.mongodb.net
  # For local development with Docker: mongodb://admin:admin123@localhost:27017
  uri: ${MONGODB_URI:mongodb://admin:admin123@localhost:27017}
  logs-database: logs_db
  meta-database: meta_db
  pool:
    min-size: 5
    max-size: 50
    max-wait-time-ms: 10000
    max-connection-idle-time-ms: 60000

# Security Configuration
security:
  jwt:
    secret: ${JWT_SECRET:leap-finance-super-secret-key-for-jwt-tokens-2024}
    expiration-ms: 86400000 # 24 hours
    refresh-expiration-ms: 604800000 # 7 days
  service-api-key: ${SERVICE_API_KEY:infopulse-service-api-key-2024}

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when_authorized

# CORS Configuration
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://127.0.0.1:3000}

# Logging
logging:
  level:
    com.leapfinance: ${LOG_LEVEL:DEBUG}
    org.springframework.data.mongodb: INFO
    org.springframework.security: INFO

# SpringDoc OpenAPI
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
